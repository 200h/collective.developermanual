=======================
 TAL template language
=======================

.. admoninition:: Description

	Plone uses TAL template language for its templates.
	This document contains references to this template
	language and generally available templates, macros
	and views you can use to build your Plone add-on
	product.

.. contents :: :local:

Introduction
-------------

Plone uses TAL template language which has METAL extensions for macros. TALES expressiong

Plone 3 has two kind of template

* View page templates. They have associated *view* template variable. These templates live under browser/
  folder structure in your add-on product. You can override them by <browser:page> ZCML directive.

* Old style page templates. They live under plone_skins structure in ZMI and. You can
  override them by register a new plone_skins layer. The most infamous of them is main_template
  which provides skeleton for all Plone themes.

See `browser:page <http://apidoc.zope.org/++apidoc++/ZCML/http_co__sl__sl_namespaces.zope.org_sl_browser/page/index.html>`_

TAL
---

`TAL <http://wiki.zope.org/ZPT/TALSpecification14>`_ is template language used Plone.
TAL is XML based language, which puts programming logic to XML attributes.

* `TAL Guide <http://www.owlfish.com/software/simpleTAL/tal-guide.html>`_

Escaped and unescaped content
=============================

By default, all TAL output is escaped for the security reasons.

.. code-block:: python

	view.text = "<b>Test</b>"

.. code-block:: html

	<div tal:content="view/text" />
	
Will output escaped HTML source code::

	&lt;b&gt;Testlt;/b&gt;
	
Unescaped content can be outputted using tal:replace attribute and structure.

.. code-block:: html

	<div tal:replace="structure view/text" />
	
Will output unescaped HTML source code::

	<b>Test</b>

METAL
------

METAL is TAL extension to provide macros and slots to the template language.

Using METAL macros is no longer recommended, since they couple 
programming logic too tightly with the template language.
You should use views instead.

Read more about in `TAL Guide <http://www.owlfish.com/software/simpleTAL/tal-guide.html>`_.

TALES expressions
----------------------

TALES expressions are condition clauses used in TAL templates and various other parts of Plone

* CSS, Javascript and KSS registries whether to include a particular file

* Action conditions whether to show or hide action link

* Workflow security guards whether to allow workflow state transition

* etc.

Read more about expressions in `TAL Guide <http://www.owlfish.com/software/simpleTAL/tal-guide.html>`_.

See :doc:`Expressions chapter </functionality/expressions>` for more information.

Images
------

See :doc:`how to use images in templates </images/templates>`.

Overriding templates for exising Plone views
----------------------------------------------

#. New style templates can be overridden by overriding the view using the template.

#. Old stype templates can be overridden by register a new skins layer in plone_skins

View page template
==================

* http://lionfacelemonface.wordpress.com/2009/03/02/i-used-macros-in-my-browser-views-and-saved-a-bunch-of-money-on-my-car-insurance/

Old style page template
=======================

* Create a new layer in portal_skins

* Templates are resolved by their name and portal_skins properties
  sets the priority which add-on product is looked for the first

* Reorder layers for the active theme so that your layer thakes
  priority (see *Properties* tab on portal_skins)
  

Edit frame
---------------

By default, Plone draws green edit frame around the content if you can 
edit it. You might want to disable this behavior for particular views.

Hiding the edit frame
===========================
If you'd like to hide the (green) editing frame place the following code to your Zope 2 like page template::

 <metal:block fill-slot="top_slot"
                tal:define="dummy python:request.set('disable_border',1)" />

Examples of this usage

* Contact info page - http://svn.plone.org/svn/plone/CMFPlone/tags/3.1.4/skins/plone_templates/contact-info.cpt

* Recently modified page - http://svn.plone.org/svn/plone/CMFPlone/tags/3.1.4/skins/plone_templates/recently_modified.pt


